<!DOCTYPE html>
<html>
<body>

<h2>Post text from TVii to miiverse</h2>
<h2>this is running from infinityfree and github, i hope i get server soon</h2>

<h2>Please write an message below or drawing. only one at the time</h2>

<input type="text" id="textValue" name="text" value="Write text." maxlength="100">
<button id="draw" onclick="vino.memo_open(true);">make drawing</button>

<script>
function post() {
if (confirm("The content you've entered \nwill now be sent.")){

    var textVal = document.getElementById("textValue").value

    var formData = new FormData();

    formData.append("body", textVal)

    formData.append("topic_tag", "SpongeBob SquarePants")
    formData.append("search_key", "TemplateShow")
    formData.append("app_data", "")
    formData.append("community_id", "0")
    formData.append("feeling_id", "0")
    formData.append("is_autopost", "0")
    formData.append("is_spoiler", "0")
    formData.append("language_id", "1")
    formData.append("is_app_jumpable", "0")

    alert('Please wait...')

    var request = new XMLHttpRequest();
    request.open("POST", "https://olvapi.nonamegiven.xyz/v1/posts")
    request.setRequestHeader('Content-Type', 'multipart/form-data')
    request.setRequestHeader('Accept', 'multipart/form-data')
    request.setRequestHeader('x-nintendo-servicetoken', vino.olv_getServiceToken().toString())
    request.setRequestHeader('x-nintendo-parampack', vino.olv_getParameterPack().toString())
    request.send(formData)

   setTimeout(function() { alert("The content you entered \nwas sent successfully."); }, 3000);
} 
else {
  alert('The content has \nnot been sent.');
  }
}

function postMemo() {
    if (confirm("The content you've entered \nwill now be sent.")){

    var drawingVal = vino.memo_getImageTgaCompressed().toString();

    var formData = new FormData();

    formData.append("painting", drawingVal)

    formData.append("topic_tag", "Testing with TVii posts...")
    formData.append("search_key", "TemplateShow")
    formData.append("app_data", "")
    formData.append("community_id", "0")
    formData.append("feeling_id", "0")
    formData.append("is_autopost", "0")
    formData.append("is_spoiler", "0")
    formData.append("language_id", "1")
    formData.append("is_app_jumpable", "0")

    alert('Please wait...')

    var request = new XMLHttpRequest();
    request.open("POST", "https://olvapi.nonamegiven.xyz/v1/posts")
    request.setRequestHeader('x-nintendo-servicetoken', vino.olv_getServiceToken().toString())
    request.setRequestHeader('x-nintendo-parampack', vino.olv_getParameterPack().toString())
    //sending form data
    request.send(formData)

   setTimeout(function() { alert("The content you entered \nwas sent successfully."); }, 3000);
} 
else {
alert('The content has not \nbeen sent.');
  }
}
</script>

  <button onclick="post()">Post text</button>
  <button onclick="postMemo()">Post memo</button>

</body>
</html>